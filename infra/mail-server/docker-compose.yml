services:
  # --- STALWART MAIL & COLLABORATION SERVER ---
  # All-in-One: SMTP, IMAP, JMAP, CalDAV, CardDAV, WebDAV + Web Admin & Analytics Dashboard.
  stalwart:
    image: stalwartlabs/stalwart:latest
    container_name: stalwart-mail
    restart: unless-stopped
    ports:
      - "25:25" # SMTP (Inbound)
      - "465:465" # SMTPS (Secure Submission)
      - "587:587" # Submission (Standard for Apps)
      - "993:993" # IMAPS (Mail Access)
      - "8080:8080" # Web Administration, Analytics Dashboard & JMAP
    environment:
      - STALWART_URL=http://localhost:8080
    volumes:
      - ./stalwart_data:/opt/stalwart-mail

  # --- SNAPPYMAIL (WEBMAIL UI) ---
  # Simple and fast web interface for users to access mail, calendars, and contacts.
  webmail:
    image: djmaze/snappymail:latest
    container_name: mail-ui
    restart: unless-stopped
    ports:
      - "8888:80"
    volumes:
      - ./snappy_data:/var/www/snappymail/data
